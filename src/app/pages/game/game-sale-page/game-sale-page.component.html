<div class="flex flex-col items-center">
    <h1>Achat de Jeux</h1>
    <h2>Identifiez l'acheteur et entrez les jeux à acheter</h2>
  
    <form [formGroup]="purchaseForm" (ngSubmit)="onSubmit()">
      
      <!-- Email de l'acheteur (optionnel) -->
      <mat-form-field>
        <mat-label>Email de l'acheteur (optionnel)</mat-label>
        <input matInput formControlName="email">
      </mat-form-field>
    <button mat-raised-button type="button" [disabled]="purchaseForm.get('email')?.invalid || !purchaseForm.get('email')?.touched" (click)="fetchBuyer()">Vérifier l'acheteur</button>
  
      <!-- Affichage de l'acheteur si trouvé -->
      <div *ngIf="buyer">
        <p><strong>Nom :</strong> {{ buyer.nom }}</p>
        <p><strong>Email :</strong> {{ buyer.email }}</p>
        <p><strong>Téléphone :</strong> {{ buyer.telephone }}</p>
      </div>
  
      <!-- IDs des jeux à acheter -->
      <mat-form-field>
        <mat-label>IDs des jeux (séparés par des virgules)</mat-label>
        <input matInput formControlName="jeux_a_acheter">
        <mat-error *ngIf="purchaseForm.get('jeux_a_acheter')?.invalid && purchaseForm.get('jeux_a_acheter')?.touched">
          Veuillez entrer au moins un ID valide.
        </mat-error>
      </mat-form-field>
  
      <!-- Code promo (optionnel) -->
      <mat-form-field>
        <mat-label>Code Promo (optionnel)</mat-label>
        <input matInput formControlName="code_promo">
      </mat-form-field>
  
    <button mat-raised-button type="submit" [disabled]="purchaseForm.invalid || (buyer==null && purchaseForm.get('email')?.touched)">
        Acheter
      </button>
    </form>
  </div>
  